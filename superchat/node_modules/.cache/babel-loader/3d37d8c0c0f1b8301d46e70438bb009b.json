{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Matt/Desktop/CHAT_APP/superchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Matt/Desktop/CHAT_APP/superchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Matt/Desktop/CHAT_APP/superchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import'./App.css';import firebase from'firebase/app';import'firebase/firestore';import'firebase/auth';import'firebase/analytics';import{useAuthState,useSignInWithEmailAndPassword}from'react-firebase-hooks/auth';import{useCollectionData}from'react-firebase-hooks/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";firebase.initializeApp({apiKey:\"AIzaSyBZsRKIfkrdGumF1l7YgLhGfcT46FKDXcc\",authDomain:\"chat-room-2-4412c.firebaseapp.com\",projectId:\"chat-room-2-4412c\",storageBucket:\"chat-room-2-4412c.appspot.com\",messagingSenderId:\"1070286557182\",appId:\"1:1070286557182:web:47e9a64978cf140ff3faaf\",measurementId:\"G-FHKJVDGCNM\"});var auth=firebase.auth();var firestore=firebase.firestore();var analytics=firebase.analytics();function App(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Text chat test\"}),/*#__PURE__*/_jsx(SignOut,{})]}),/*#__PURE__*/_jsx(\"section\",{children:user?/*#__PURE__*/_jsx(ChatRoom,{}):/*#__PURE__*/_jsx(SignIn,{})})]});}function SignIn(){var signInWithGoogle=function signInWithGoogle(){var provider=new firebase.auth.GoogleAuthProvider();auth.signInWithPopup(provider);};var useSignInWithEmailAndPassword=function useSignInWithEmailAndPassword(){var provider=new firebase.auth.EmailAuthProvider();auth.createUserWithEmailAndPassword(provider);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"sign-in\",onClick:useSignInWithEmailAndPassword,children:\"Sign Up with Email\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sign-in\",onClick:signInWithGoogle,children:\"Sign in with Google\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Gob Cave\"})]});}function SignOut(){return auth.currentUser&&/*#__PURE__*/_jsx(\"button\",{className:\"sign-out\",onClick:function onClick(){return auth.signOut();},children:\"Sign Out\"});}function ChatRoom(){var dummy=useRef();var messagesRef=firestore.collection('messages');var query=messagesRef.orderBy('createdAt').limit(25);var _useCollectionData=useCollectionData(query,{idField:'id'}),_useCollectionData2=_slicedToArray(_useCollectionData,1),messages=_useCollectionData2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var sendMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _auth$currentUser,uid,photoURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_auth$currentUser=auth.currentUser,uid=_auth$currentUser.uid,photoURL=_auth$currentUser.photoURL;_context.next=4;return messagesRef.add({text:formValue,createdAt:firebase.firestore.FieldValue.serverTimestamp(),uid:uid,photoURL:photoURL});case 4:setFormValue('');dummy.current.scrollIntoView({behavior:'smooth'});case 6:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{children:[messages&&messages.map(function(msg){return/*#__PURE__*/_jsx(ChatMessage,{message:msg},msg.id);}),/*#__PURE__*/_jsx(\"span\",{ref:dummy})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,children:[/*#__PURE__*/_jsx(\"input\",{value:formValue,onChange:function onChange(e){return setFormValue(e.target.value);},placeholder:\"Type..\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!formValue,children:\"SEND\"})]})]});}function ChatMessage(props){var _props$message=props.message,text=_props$message.text,uid=_props$message.uid,photoURL=_props$message.photoURL;var messageClass=uid===auth.currentUser.uid?'sent':'received';return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(messageClass),children:[/*#__PURE__*/_jsx(\"img\",{src:photoURL||'https://api.adorable.io/avatars/23/abott@adorable.png'}),/*#__PURE__*/_jsx(\"p\",{children:text})]})});}export default App;","map":{"version":3,"sources":["C:/Users/Matt/Desktop/CHAT_APP/superchat/src/App.js"],"names":["React","useRef","useState","firebase","useAuthState","useSignInWithEmailAndPassword","useCollectionData","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","analytics","App","user","SignIn","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","EmailAuthProvider","createUserWithEmailAndPassword","SignOut","currentUser","signOut","ChatRoom","dummy","messagesRef","collection","query","orderBy","limit","idField","messages","formValue","setFormValue","sendMessage","e","preventDefault","uid","photoURL","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","map","msg","id","target","value","ChatMessage","props","message","messageClass"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport './App.css';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/analytics';\n\nimport { useAuthState, useSignInWithEmailAndPassword } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyBZsRKIfkrdGumF1l7YgLhGfcT46FKDXcc\",\n  authDomain: \"chat-room-2-4412c.firebaseapp.com\",\n  projectId: \"chat-room-2-4412c\",\n  storageBucket: \"chat-room-2-4412c.appspot.com\",\n  messagingSenderId: \"1070286557182\",\n  appId: \"1:1070286557182:web:47e9a64978cf140ff3faaf\",\n  measurementId: \"G-FHKJVDGCNM\"\n})\n\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\nconst analytics = firebase.analytics();\n\n\nfunction App() {\n\n  const [user] = useAuthState(auth);\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>Text chat test</h1>\n        <SignOut />\n      </header>\n\n      <section>\n        {user ? <ChatRoom /> : <SignIn />}\n      </section>\n\n    </div>\n  );\n}\n\nfunction SignIn() {\n\n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider);\n  }\n\n  const useSignInWithEmailAndPassword = () => {\n    const provider = new firebase.auth.EmailAuthProvider();\n    auth.createUserWithEmailAndPassword(provider);\n  }\n\n  return (\n    <> \n      <button className=\"sign-in\" onClick={useSignInWithEmailAndPassword}>Sign Up with Email</button>\n      <button className=\"sign-in\" onClick={signInWithGoogle}>Sign in with Google</button>\n      <p>Gob Cave</p>\n    </>\n  )\n\n}\n\nfunction SignOut() {\n  return auth.currentUser && (\n    <button className=\"sign-out\" onClick={() => auth.signOut()}>Sign Out</button>\n  )\n}\n\n\nfunction ChatRoom() {\n  const dummy = useRef();\n  const messagesRef = firestore.collection('messages');\n  const query = messagesRef.orderBy('createdAt').limit(25);\n\n  const [messages] = useCollectionData(query, { idField: 'id' });\n\n  const [formValue, setFormValue] = useState('');\n\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n\n    const { uid, photoURL } = auth.currentUser;\n\n    await messagesRef.add({\n      text: formValue,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL\n    })\n\n    setFormValue('');\n    dummy.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  return (<>\n    <main>\n\n      {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n\n      <span ref={dummy}></span>\n\n    </main>\n\n    <form onSubmit={sendMessage}>\n\n      <input value={formValue} onChange={(e) => setFormValue(e.target.value)} placeholder=\"Type..\" />\n\n      <button type=\"submit\" disabled={!formValue}>SEND</button>\n\n    </form>\n  </>)\n}\n\n\nfunction ChatMessage(props) {\n  const { text, uid, photoURL } = props.message;\n\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n\n  return (<>\n    <div className={`message ${messageClass}`}>\n      <img src={photoURL || 'https://api.adorable.io/avatars/23/abott@adorable.png'} />\n      <p>{text}</p>\n    </div>\n  </>)\n}\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}